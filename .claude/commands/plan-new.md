---
description: 新しい実装プランを作成する
---

# 新規プラン作成

ユーザーの要望を元に、構造化された実装プランを作成します。

## 使い方

```
/plan-new
```

## 実行手順

### Step 1: 要望の収集

1. 「何を実装したいですか？」と聞く
2. 必要に応じて調査（「調査します」と宣言してから実行）
3. タスクリストに追加して表示
4. 「他にやりたいことはありますか？」
5. 全部揃うまで繰り返し

**タスクリスト表示:**

```markdown
## 現在のタスクリスト

| # | タスク | 概要 |
|---|--------|------|
| 1 | {タスク名} | {説明} |

他にやりたいことはありますか？
```

### Step 2: プランファイルの作成

ゴーサインが出たら：

1. ブランチ名を決定（`feature/{YYYY-MM}-{説明}` 形式）
2. 以下を作成：

```
doc/plans/{branch-name}/
├── README.md
├── task-01-xxx.md
└── task-02-xxx.md
```

### Step 3: README.md

```markdown
# 実装プラン: {プラン名}

## 概要

{プランの目的}

## ブランチ

```
{branch-name}
```

## タスク一覧

| # | ファイル | 内容 | 依存 |
|---|---------|------|------|
| 01 | task-01-xxx.md | {概要} | なし |
| 02 | task-02-xxx.md | {概要} | 01 |

## コミット規約

```
<type>: <description>

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>
```

## 進捗

- [ ] ブランチ作成
- [ ] task-01 完了
- [ ] task-02 完了
- [ ] 全テスト通過
- [ ] mainへマージ
```

### Step 4: タスクファイル

```markdown
# タスク{番号}: {タスク名}

## 目的

{達成すること}

## 背景

{なぜ必要か}

## 対象ファイル

- `src/xxx.cs` - {変更内容}

## 実装内容

- [ ] {実装項目1}
- [ ] {実装項目2}

## テスト

- [ ] {テスト項目}
- [ ] `dotnet build` 成功
- [ ] `dotnet test` 成功

## 完了条件

- {条件}
- 既存テストが通る

## 参考情報

- {参考ファイル}

---

## 実行結果

<!-- /plan-run 実行時に自動追記 -->
```

### Step 5: ブランチ作成

```bash
git checkout -b {branch-name}
```

## 出力形式

```
## プラン作成完了

- プラン名: {プラン名}
- ブランチ: {branch-name}
- タスク数: N件
- 場所: doc/plans/{branch-name}/

次のステップ: `/plan-run doc/plans/{branch-name}`
```

## 命名規約

- **ブランチ名**: `feature/{YYYY-MM}-{説明}` または `fix/{issue番号}-{説明}`
- **タスクファイル**: `task-{番号2桁}-{kebab-case}.md`

## 注意事項

- タスクは小さく分割（1タスク = 1コミット程度）
- テスト項目を必ず含める
- 調査は宣言してから実行
- 全要望を聞いてからプランファイルを作成
