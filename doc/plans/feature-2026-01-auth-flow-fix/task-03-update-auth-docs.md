# タスク03: 認証関連ドキュメント更新

## 目的

認証フローの変更をドキュメントに反映し、開発者・運用者が認証の仕組みを理解できるようにする。

## 背景

- CLAUDE.md に認証フローの説明がない
- README.md に Azure AD 設定手順の詳細がない
- 開発環境と本番環境での認証の違いが分かりにくい

## 対象ファイル

- `CLAUDE.md` - 認証フローのセクションを追加
- `README.md` - Azure AD 設定手順を追加（必要に応じて）

## 実装内容

- [ ] CLAUDE.md に認証フローのセクションを追加
  - 開発環境: DevAuthenticationHandler（自動認証）
  - 本番環境: Azure AD 認証
  - 切り替え条件の説明
- [ ] appsettings.json の AzureAd セクションの設定方法を記載
- [ ] README.md に初期設定手順を追加（必要に応じて）

## テスト

- [ ] ドキュメントの内容が実装と一致している
- [ ] 設定手順に従って設定できることを確認

## 完了条件

- CLAUDE.md に認証フローが明記されている
- 新規開発者が認証の仕組みを理解できる
- 設定手順が記載されている

## 参考情報

- task-01, task-02 の実装結果
- `src/QInfoRanker.Web/Program.cs` の認証設定

---

## 実行結果

### 完了: 2026-01-18

CLAUDE.md に認証フローのセクションを追加しました。

#### 追加内容
- **認証フロー**: 開発環境（DevAuthenticationHandler）と本番環境（Azure AD）の2種類を表形式で説明
- **切り替え条件**: `AzureAd:ClientId` による自動判定ロジックを明記
- **Azure AD 設定**: appsettings.json での設定例を記載
- **関連ファイル**: Program.cs、DevAuthenticationHandler.cs、appsettings.json へのリンク

#### 変更ファイル
- `CLAUDE.md`: 「設定」セクションと「よくある作業」セクションの間に「認証」セクションを追加（行156-189）

#### 確認事項
- [x] ドキュメントの内容が実装と一致している
- [x] 新規開発者が認証の仕組みを理解できる構成
- [x] 設定手順が記載されている
